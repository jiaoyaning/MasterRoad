# 启动速度优化

# UI优化
1. 使用约束布局(ConstraintLayout)优化层级
2. 使用 <merge> 减少视图层级 , 使用 <ViewStub> 延迟加载
    > merge必须放在使用该标签的布局文件的根节点
    > ViewStub是一个不可见的、大小为0的View，最佳用途就是实现View的延迟加载，和Java中常见的性能优化方法延迟加载一样。
3. IdleHandler 处理不重要事件 比如 onCreate，onStart，onResume中耗时较短但非必要的代码可以放到IdleHandler中执行，减少启动时间
4. 提前实例化ui到缓存池中，比如 webview
5. x2c的使用，Compose的初步使用
6. AsyncLayoutInflater 异步加载布局
    > ```java
    new AsyncLayoutInflater(MainActivity.this)
        .inflate(R.layout.activity_main, null, new AsyncLayoutInflater.OnInflateFinishedListener() {
            @Override
            public void onInflateFinished(@NonNull View view, int i, @Nullable ViewGroup viewGroup) {
                //回调给主线程
                setContentView(view);
            }
        });
    ```
  


# 内存优化


# 启动优化
1. 透明主题，视觉上的优化
2. StartUp，使用ContentProvider来初始化，可子线程初始化的放入子线程
3. SplashActivity速度优化，开屏尽量不要有网络请求，先渲染页面，等页面渲染成功后再进行网络请求进入主页，一级主页的fragment懒加载
4. GC抑制提速-支付宝
    [支付宝客户端架构解析](https://juejin.cn/post/6844903705028853767)
   

# 网络优化
1. 使用本地缓存。合理合并api接口。
2. 减少网络请求的数据量，
   > 比如使用protoBuff格式，okhttp开启gzip压缩，支持Http 2.0，使用其头部压缩，二进制格式替代Http 1.1 文本格式的特性。
   > 图片：当不得不获取一张本地缓存没有的图片时，就不得不请求服务端获取。此时没有必要使用最高清的大尺寸的原始图片，
   >     完全可以针对客户端显示的图片尺寸和屏幕密度，向服务器请求较小的尺寸，和较低质量的图片，服务器通过图片处理，返回符合此参数的图片给客户端进行显示。
3. WebSocket代替轮训


#### 问：页面加载缓慢如何排查和优化（fps、systrace、traceview）
打开SDK 自带的 DDMS 工具
[Systrace](https://www.jianshu.com/p/75aa88d1b575)
[TraceView](https://www.jianshu.com/p/7e9ca2c73c97)

[Android 基础架构组，面试题问什么？](https://mp.weixin.qq.com/s/gbHTA0YGrD3KJhf3zy8S6Q)
[Android网络优化方案](https://juejin.cn/post/6896302142542315533)