[TOC]  

[Android&Kotlin编译速度原理剖析](https://mp.weixin.qq.com/s/6gqsFUYMPlAuOLReHGgWhw)  

# 打包流程
#### 1. aapt / aapt2：打包资源文件 & 生成R.java文件
[快弃用陈年老旧的aapt，appt2功能更加好用](https://blog.csdn.net/qq_43278826/article/details/86543932)  
>aapt2将原先的资源编译打包过程拆分成了两部分，即编译和链接。
> - 编译：将资源文件编译为二进制格式文件
> - 链接：将编译后的所有文件合并，打包成一个单独文件  
> 
>这种方式可以很好的提升资源的编译性能，比如只有一个资源文件发生改变时，你只需要重新编译改变的文件， 然后将其与其他未改变的资源进行链接即可。
而之前的aapt是将所有资源进行merge，merge完后将所有资源进行编译，
产生一个资源ap_文件，该文件是一个压缩包，这样带来的后果就是即使只改变了一个资源文件，也要进行全量编译。

#### 2. aidl：处理aidl文件

#### 3. javac：生成.class文件

#### 4. dex：转化.class成dex文件

#### 5. apkbuilder：生成apk包

#### 6. jarsigner：对APK进行签名

#### 7. zipalign：签名对齐

---

# v1、v2、v3签名详解
[Android 新增的v1、v2、v3签名详解](https://mp.weixin.qq.com/s/1wbX5JEudBw1LMQe3hrDZQ)  
[细说Android apk四代签名：APK v1、APK v2、APK v3、APK v4](https://mp.weixin.qq.com/s/aaGNYPCWd8vkhGz_arvwcg)
#### v1

#### v2

#### v3

---

# APK思考
[一、APK是什么](https://www.yuque.com/androidzhixin/androidzhixin/yk86ap)
[二、APK包含了什么？](https://www.yuque.com/androidzhixin/androidzhixin/nstn75)
[三、生成一个APK（aapt）](https://www.yuque.com/androidzhixin/androidzhixin/cdnhpg)
[四、生成一个APK（aapt2+aar）](https://www.yuque.com/androidzhixin/androidzhixin/vfep3p)