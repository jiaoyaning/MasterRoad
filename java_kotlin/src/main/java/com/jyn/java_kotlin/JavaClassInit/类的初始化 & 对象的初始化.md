# 类的初始化
### 类的初始化触发机制
在同一个类加载器下，一个类只会被初始化一次，共有六种触发类初始化的时机  
1. 虚拟机启动时，包含main方法的主类  
2. new 指令创建对象时(目标类未被初始化时进行初始化)  
3. 当遇到访问静态方法或者静态字段的指令时，如果目标对象类没有被初始化则进行初始化操作（final修饰的静态除外）；  
4. 子类的初始化过程如果发现其父类还没有进行过初始化，则需要先触发其父类的初始化；
5. 使用反射API 进行反射调用时，如果类没有进行过初始化则需要先触发其初始化；  
6. 第一次调用java.lang.invoke.MethodHandle 实例时，需要初始化 MethodHandle 指向方法所在的类。  

巧记：`main` `new` `静态` 加 `反射`，`父类` `Method Handle`。  
    闷牛静反父(李晨饰演的曹丕反抗父亲)

上述6种情况在JVM中被称为`主动引用`，除这六种之外的所有引用类的方式都被称为`被动引用`，被动引用并不会触发类的初始化。  
最典型的🌰是在子类中调用父类的静态变量。
对于静态字段，只有直接定义这个字段的类才会被初始化，因此通过子类 Child 来引用父类 Parent 中定义的静态字段，只会触发父类 Parent 的初始化而不会触发子类 Child 的初始化。
虽然只有Parent被初始化，但是Parent和Child都经过了装载验证阶段，并被加载到内存当中

